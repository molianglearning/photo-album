# 安全说明

## 密码系统

本系统有三层密码保护：

### 1. 前台访问密码
- **用途**: 普通用户访问相册
- **默认密码**: `user123`
- **修改方式**: 后台管理 → 密码管理
- **存储方式**: 数据库（bcrypt 加密）

### 2. 后台管理密码
- **用途**: 管理员登录后台
- **默认密码**: `admin123`
- **修改方式**: 后台管理 → 密码管理
- **存储方式**: 数据库（bcrypt 加密）

### 3. 超级密码 ⚡
- **用途**: 紧急访问通道，忘记密码时使用
- **默认密码**: `SuperAdmin@2024`
- **修改方式**: 编辑 `.env` 文件中的 `SUPER_PASSWORD`
- **存储方式**: 环境变量（明文）
- **特点**: 
  - 可同时用于前台和后台登录
  - 不受"密码管理"功能影响
  - 始终有效

## 安全建议

### 部署前必做

1. **修改超级密码**
   ```bash
   # 编辑 .env 文件
   SUPER_PASSWORD=你的复杂密码
   ```

2. **修改 JWT 密钥**
   ```bash
   # 编辑 .env 文件
   JWT_SECRET=你的随机密钥
   ```

3. **修改数据库密码**
   ```bash
   # 编辑 .env 文件
   DB_PASSWORD=你的数据库密码
   ```

### 部署后必做

1. **修改默认密码**
   - 登录后台: http://your-domain/admin
   - 使用默认密码 `admin123` 登录
   - 进入"密码管理"页面
   - 修改前台和后台密码

2. **保护 .env 文件**
   ```bash
   # 确保 .env 文件不被提交到 Git
   # 已在 .gitignore 中配置
   
   # 设置文件权限（Linux/Mac）
   chmod 600 .env
   ```

3. **使用 HTTPS**
   - 生产环境必须使用 HTTPS
   - 可使用 Let's Encrypt 免费证书
   - 配置 Nginx 反向代理

### 密码强度建议

- **长度**: 至少 12 位
- **复杂度**: 包含大小写字母、数字、特殊符号
- **示例**: `MyP@ssw0rd2024!`
- **避免**: 生日、电话号码、常见单词

### 定期维护

1. **定期更换密码** (建议每 3-6 个月)
2. **检查访问日志** (查看是否有异常登录)
3. **备份数据库** (定期备份，防止数据丢失)
4. **更新依赖包** (修复安全漏洞)

## 忘记密码怎么办？

### 方案 1: 使用超级密码登录
直接使用 `.env` 文件中配置的超级密码登录

### 方案 2: 重置为默认密码
```bash
npm run reset-password
```
这会将前台和后台密码重置为 `user123` 和 `admin123`

### 方案 3: 查看当前密码配置
```bash
npm run show-passwords
```
显示所有密码信息（包括超级密码）

## 紧急情况处理

### 超级密码泄露
1. 立即修改 `.env` 文件中的 `SUPER_PASSWORD`
2. 重启服务器使新密码生效
3. 检查访问日志，确认是否有未授权访问

### 数据库密码泄露
1. 登录数据库管理系统修改密码
2. 更新 `.env` 文件中的 `DB_PASSWORD`
3. 重启服务器

### 服务器被入侵
1. 立即停止服务
2. 备份数据
3. 检查日志文件
4. 重新部署系统
5. 修改所有密码

## 联系方式

如有安全问题，请及时联系系统管理员。
