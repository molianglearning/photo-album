# 快速测试指南

## 测试拖拽排序功能

### 步骤：
1. 启动项目：`npm run dev`
2. 访问后台：http://localhost:5173/admin/login
3. 登录后台（密码：admin123）
4. 进入"相册管理"或"分类管理"

### 测试拖拽：
- ✅ **长按左侧 ☰ 图标 0.5 秒**
- ✅ 感受震动反馈（移动设备）
- ✅ 看到列表项放大并高亮
- ✅ 拖动到新位置
- ✅ 松手完成排序
- ✅ 刷新页面验证排序保存

### 预期效果：
- 长按 ☰ 图标时，列表项会放大（scale 1.05）
- 背景变为浅蓝色（#e3f2fd）
- 拖动时有阴影效果
- 松手后自动保存排序

---

## 测试大图片上传功能

### 准备测试图片：
- 小图片：< 5MB（应该不压缩）
- 中图片：5-10MB（轻度压缩）
- 大图片：10-20MB（中等压缩）
- 超大图片：> 20MB（激进压缩）

### 步骤：
1. 进入后台 → 照片管理
2. 选择一个相册
3. 点击"选择照片上传"
4. 选择测试图片

### 观察进度：
- **0-30%**: 显示"压缩中..."
- **30-100%**: 显示"上传中..."
- 控制台会输出压缩日志

### 预期结果：
- ✅ 小图片（< 5MB）直接上传，不压缩
- ✅ 中图片（5-10MB）压缩到约 5MB
- ✅ 大图片（10-20MB）压缩到约 8MB
- ✅ 超大图片（> 20MB）压缩到约 10MB
- ✅ 所有图片都能成功上传

### 控制台日志示例：
```
photo.jpg: 15.23MB - 中等压缩
photo.jpg: 压缩完成 15.23MB -> 7.89MB
```

---

## 常见问题排查

### 拖拽不工作？
1. 确保长按的是 ☰ 图标，不是其他区域
2. 长按时间要够（0.5 秒）
3. 检查浏览器控制台是否有错误
4. 尝试刷新页面

### 上传失败？
1. 检查图片格式（支持 JPG、PNG、GIF、WebP）
2. 检查网络连接
3. 查看控制台错误信息
4. 尝试减少图片数量
5. 如果使用 Nginx，检查配置（参考 UPLOAD_FIX.md）

### 压缩太慢？
- 这是正常的，大图片压缩需要时间
- 使用了 Web Worker，不会卡住界面
- 可以在压缩时继续操作其他功能

---

## 性能基准

### 压缩速度（参考）：
- 5MB 图片：约 1-2 秒
- 10MB 图片：约 2-4 秒
- 20MB 图片：约 4-8 秒

### 上传速度：
- 取决于网络带宽
- 本地测试：约 10-20MB/s
- 远程服务器：取决于上行带宽

---

## 修改内容总结

### 前端修改：
- `src/views/admin/AlbumManage.vue` - 优化拖拽配置
- `src/views/admin/CategoryManage.vue` - 优化拖拽配置
- `src/views/admin/PhotoManage.vue` - 优化压缩策略

### 后端修改：
- `server/app.js` - 增加请求体限制到 100MB
- `server/routes/admin.js` - 增加文件上传限制到 100MB

### 关键改进：
1. 拖拽延迟从 200ms 增加到 500ms
2. 添加 `handle: '.drag-handle'` 配置
3. 添加震动反馈
4. 智能压缩策略（根据文件大小）
5. 增加服务器限制到 100MB
